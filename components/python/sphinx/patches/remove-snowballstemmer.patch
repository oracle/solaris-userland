Snowballstemmer is not available on Solaris and considering that its
functionality is fairly insubstantial and not necessary to us, it
is patched out.

Not intended for upstream.

--- sphinx-9.0.4/PKG-INFO
+++ sphinx-9.0.4/PKG-INFO
@@ -55,7 +55,6 @@ License-File: LICENSE.rst
 Requires-Dist: Jinja2>=3.1
 Requires-Dist: Pygments>=2.17
 Requires-Dist: docutils>=0.20,<0.23
-Requires-Dist: snowballstemmer>=2.2
 Requires-Dist: babel>=2.13
 Requires-Dist: alabaster>=0.7.14
 Requires-Dist: requests>=2.30.0
--- sphinx-9.0.4/pyproject.toml
+++ sphinx-9.0.4/pyproject.toml
@@ -71,7 +71,6 @@ dependencies = [
     "Jinja2>=3.1",
     "Pygments>=2.17",
     "docutils>=0.20,<0.23",
-    "snowballstemmer>=2.2",
     "babel>=2.13",
     "alabaster>=0.7.14",
     "requests>=2.30.0",
--- sphinx-9.0.4/sphinx/search/da.py
+++ sphinx-9.0.4/sphinx/search/da.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.da import DANISH_STOPWORDS
@@ -16,7 +19,14 @@ class SearchDanish(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('danish')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('danish')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/de.py
+++ sphinx-9.0.4/sphinx/search/de.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.de import GERMAN_STOPWORDS
@@ -16,7 +19,14 @@ class SearchGerman(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('german')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('german')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/en.py
+++ sphinx-9.0.4/sphinx/search/en.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.en import ENGLISH_STOPWORDS
@@ -16,7 +19,14 @@ class SearchEnglish(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('english')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('english')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/es.py
+++ sphinx-9.0.4/sphinx/search/es.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.es import SPANISH_STOPWORDS
@@ -16,7 +19,14 @@ class SearchSpanish(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('spanish')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('spanish')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/fi.py
+++ sphinx-9.0.4/sphinx/search/fi.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.fi import FINNISH_STOPWORDS
@@ -16,7 +19,14 @@ class SearchFinnish(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('finnish')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('finnish')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/fr.py
+++ sphinx-9.0.4/sphinx/search/fr.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.fr import FRENCH_STOPWORDS
@@ -16,7 +19,14 @@ class SearchFrench(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('french')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('french')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/hu.py
+++ sphinx-9.0.4/sphinx/search/hu.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.hu import HUNGARIAN_STOPWORDS
@@ -16,7 +19,14 @@ class SearchHungarian(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('hungarian')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('hungarian')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/it.py
+++ sphinx-9.0.4/sphinx/search/it.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.it import ITALIAN_STOPWORDS
@@ -16,7 +19,14 @@ class SearchItalian(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('italian')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('italian')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/nl.py
+++ sphinx-9.0.4/sphinx/search/nl.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.nl import DUTCH_STOPWORDS
@@ -16,7 +19,14 @@ class SearchDutch(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('dutch')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('dutch')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/no.py
+++ sphinx-9.0.4/sphinx/search/no.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.no import NORWEGIAN_STOPWORDS
@@ -16,7 +19,14 @@ class SearchNorwegian(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('norwegian')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('norwegian')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/pt.py
+++ sphinx-9.0.4/sphinx/search/pt.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.pt import PORTUGUESE_STOPWORDS
@@ -16,7 +19,14 @@ class SearchPortuguese(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('portuguese')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('portuguese')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/ro.py
+++ sphinx-9.0.4/sphinx/search/ro.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 
@@ -15,7 +18,14 @@ class SearchRomanian(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('romanian')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('romanian')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/ru.py
+++ sphinx-9.0.4/sphinx/search/ru.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.ru import RUSSIAN_STOPWORDS
@@ -16,7 +19,14 @@ class SearchRussian(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('russian')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('russian')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/sv.py
+++ sphinx-9.0.4/sphinx/search/sv.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.sv import SWEDISH_STOPWORDS
@@ -16,7 +19,14 @@ class SearchSwedish(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('swedish')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('swedish')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/tr.py
+++ sphinx-9.0.4/sphinx/search/tr.py
@@ -2,7 +2,10 @@
 
 from __future__ import annotations
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 
@@ -15,7 +18,14 @@ class SearchTurkish(SearchLanguage):
 
     def __init__(self, options: dict[str, str]) -> None:
         super().__init__(options)
-        self.stemmer = snowballstemmer.stemmer('turkish')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('turkish')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def stem(self, word: str) -> str:
+        if self.stemmer is None:
+            return word.lower()
         return self.stemmer.stemWord(word.lower())
--- sphinx-9.0.4/sphinx/search/zh.py
+++ sphinx-9.0.4/sphinx/search/zh.py
@@ -6,7 +6,10 @@ import re
 from pathlib import Path
 from typing import TYPE_CHECKING
 
-import snowballstemmer
+try:
+    import snowballstemmer
+except ImportError:
+    snowballstemmer = None
 
 from sphinx.search import SearchLanguage
 from sphinx.search._stopwords.en import ENGLISH_STOPWORDS
@@ -50,7 +53,12 @@ class SearchChinese(SearchLanguage):
         if dict_path and Path(dict_path).is_file():
             jieba_load_userdict(str(dict_path))
 
-        self.stemmer = snowballstemmer.stemmer('english')
+        if snowballstemmer is not None:
+            self.stemmer = snowballstemmer.stemmer('english')
+        else:
+            import warnings
+            warnings.warn("snowballstemmer is not installed and stemming is thus very limited.")
+            self.stemmer = None
 
     def split(self, input: str) -> list[str]:
         chinese: list[str] = list(cut_for_search(input))
@@ -66,6 +74,8 @@ class SearchChinese(SearchLanguage):
         # Don't stem Latin words that are long enough to be relevant for search
         # if not stemmed, but would be too short after being stemmed
         # avoids some issues with acronyms
+        if self.stemmer is None:
+            return word.lower()
         stemmed = self.stemmer.stemWord(word.lower())
         should_not_be_stemmed = (
             len(word) >= 3 > len(stemmed) and word in self.latin_terms
--- sphinx-9.0.4/tests/test_search.py
+++ sphinx-9.0.4/tests/test_search.py
@@ -28,6 +28,9 @@ JAVASCRIPT_TEST_ROOTS = [
     if (directory / 'conf.py').exists()
 ]
 
+import pytest
+pytestmark = pytest.mark.skip("snowballstemmer is not available on Solaris")
+
 
 class DummyDomainsContainer:
     def __init__(self, **domains: DummyDomain) -> None:
