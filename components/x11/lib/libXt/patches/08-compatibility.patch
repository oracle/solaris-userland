Maintain Solaris ABI compatibility across X11R5 -> X11R6 upgrade.

Need to evaluate for submission upstream.

Code in Event.c checked in without a BugID:

D 1.5   96/01/19 17:37:50 stuartm       6 5     00016/00000/01844
added compatability functions _XtRegisterWindow and _XtUnregisterWindow
They simply call the newer drawable routines.

Code in NextEvent.c checked in under:

Bug 14917447 - SUNBT1254790 _XtwaitForSomething renamed in X11R6 with no backcompat

The symbol _XtwaitForSomething in X11R5 was changed to _XtWaitForSomething in
X11R6.

This violates backwards compatibility and disables all extensions which use
the symbol.

Incorporates fix for
Oracle Bug 14974628 - SUNBT4185875 _XtwaitForSomething implemented incorrectly
    on X11R6. It does not work.

which added the missing "return" keywords.

--- libXt-1.3.1/src/Event.c
+++ libXt-1.3.1/src/Event.c
@@ -593,6 +593,17 @@ UNLOCK_PROCESS;
     UNLOCK_APP(app);
 }
 
+/* need this for backward compatability */
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wmissing-prototypes"
+void _XtRegisterWindow(
+    Window window,
+    Widget widget)
+{
+    XtRegisterDrawable(XtDisplay(widget), (Drawable)window, widget);
+}
+#pragma GCC diagnostic pop
+
 void
 XtUnregisterDrawable(Display *display, Drawable drawable)
 {
@@ -644,6 +652,17 @@ UNLOCK_PROCESS;
     UNLOCK_APP(app);
 }
 
+/* need this for backward compatability */
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wmissing-prototypes"
+void _XtUnregisterWindow(
+    register Window window,
+    register Widget widget)
+{
+    XtUnregisterDrawable(XtDisplay(widget), (Drawable)window);
+}
+#pragma GCC diagnostic pop
+
 static void
 ExpandWWTable(register WWTable tab)
 {
--- libXt-1.3.1/src/NextEvent.c
+++ libXt-1.3.1/src/NextEvent.c
@@ -780,6 +780,36 @@ (*ptr->te_proc) (ptr->te_closure, (XtInt
 #define SeCallProc(ptr) \
     (*ptr->se_proc) (ptr->se_closure, (XtSignalId*)&ptr);
 
+#ifdef __sun /*SUNSOFT */
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wmissing-prototypes"
+int _XtwaitForSomething(
+    _XtBoolean ignoreTimers,
+    _XtBoolean ignoreInputs,
+    _XtBoolean ignoreEvents,
+    _XtBoolean block,
+    unsigned long *howlong,
+    XtAppContext app)
+{
+#ifdef XTHREADS
+/* fix for bug 4185875 leob */
+return _XtWaitForSomething(app,
+            ignoreEvents, ignoreTimers, ignoreInputs, TRUE,
+            block,
+            TRUE,
+            howlong);
+#else
+/* fix for bug 4185875 leob */
+return _XtWaitForSomething(app,
+            ignoreEvents, ignoreTimers, ignoreInputs, TRUE,
+            block,
+            howlong);
+#endif
+
+}
+#pragma GCC diagnostic pop
+#endif /* SUNSOFT */
+
 /*
  * Public Routines
  */
